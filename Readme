
# ğŸ–¥ï¸ Frontend â€“ Panel de Disponibilidad

### Portoviejo 360

Este proyecto corresponde al **frontend del mÃ³dulo de Disponibilidad y BÃºsqueda Inteligente** del sistema **Portoviejo 360**.
EstÃ¡ desarrollado con **Next.js** y consume datos del backend mediante **API REST** y **WebSockets**, permitiendo visualizar propiedades inmobiliarias y recibir **actualizaciones en tiempo real** sin recargar la pÃ¡gina.

---

## ğŸ¯ Objetivo del Frontend

* Mostrar un listado de propiedades inmobiliarias.
* Visualizar el estado de cada propiedad (Disponible, Ocupado, Mantenimiento).
* Recibir actualizaciones de estado en tiempo real mediante WebSockets.
* Integrar un **mapa interactivo** para la visualizaciÃ³n geogrÃ¡fica.
* Mantener una UI reactiva, responsive y desacoplada del backend.

---

## ğŸ§± TecnologÃ­as Utilizadas

* **Next.js (App Router)**
* **React**
* **TypeScript**
* **Socket.IO Client**
* **Leaflet** (mapas)
* **Context API** (estado global)
* **CSS Modules / Global CSS**

---

## ğŸ“ Estructura del Proyecto

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx        # Layout principal
â”‚   â”œâ”€â”€ page.tsx          # Vista principal
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”œâ”€â”€ Map.tsx
â”‚   â””â”€â”€ MapWrapper.tsx
â”œâ”€â”€ context/
â”‚   â””â”€â”€ PropiedadesContext.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ usePropiedades.ts
â”‚   â””â”€â”€ usePropiedadesSocket.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api.ts            # Consumo API REST
â”‚   â””â”€â”€ socket.ts         # ConfiguraciÃ³n Socket.IO
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ getColorByEstado.ts
â”œâ”€â”€ types/
â””â”€â”€ public/
```

---

## ğŸ”Œ ComunicaciÃ³n con el Backend

### API REST

El frontend consume endpoints del backend para:

* Obtener propiedades.
* Consultar filtros.
* Inicializar el estado de la aplicaciÃ³n.

### WebSocket (Tiempo Real)

El frontend se conecta al backend mediante **Socket.IO** para escuchar cambios de estado de las propiedades.

Evento escuchado:

```ts
propiedad:estado-cambiado
```

Ejemplo de payload recibido:

```json
{
  "id_propiedad": 1,
  "estado_id": 3,
  "estado": "MANTENIMIENTO",
  "precio_mensual": "400.00",
  "publico_objetivo": "SOLO ESTUDIANTES",
  "timestamp": "2025-12-21T04:28:38.983Z"
}
```

---

## ğŸ” Manejo de Estado

* El estado global de las propiedades se maneja mediante **Context API**.
* El hook `usePropiedadesSocket`:

  * Escucha eventos WebSocket.
  * Actualiza el estado global.
* La UI se re-renderiza automÃ¡ticamente cuando cambia el estado.

ğŸ“Œ **No se recarga la pÃ¡gina**
ğŸ“Œ **No se muta estado manualmente**

---

## ğŸ—ºï¸ Mapa Interactivo

* Implementado con **Leaflet**.
* Muestra propiedades geolocalizadas.
* Preparado para sincronizaciÃ³n futura con eventos en tiempo real.

---

## ğŸ§ª Pruebas Realizadas

* VerificaciÃ³n manual del consumo de la API REST.
* ConfirmaciÃ³n de conexiÃ³n WebSocket en consola.
* ValidaciÃ³n de recepciÃ³n de eventos en tiempo real.
* ValidaciÃ³n visual del cambio de estado en la UI.

---

## ğŸš€ EjecuciÃ³n Local

### InstalaciÃ³n de dependencias

```bash
npm install
# o
yarn install
```

### EjecuciÃ³n

```bash
npm run dev
# o
yarn dev
```

Frontend disponible en:

```
http://localhost:3001
```

âš ï¸ El backend debe estar corriendo para recibir datos y eventos en tiempo real.

---

## âš ï¸ Notas Importantes

* Actualmente el frontend puede usar **datos simulados (mocks)** como fallback inicial.
* La estructura estÃ¡ preparada para consumir datos reales del backend.
* La autenticaciÃ³n no estÃ¡ implementada en esta fase.

---

## ğŸ§­ PrÃ³ximos Pasos (no implementados)

* Consumo completo de datos reales desde la API.
* ActualizaciÃ³n visual del mapa en tiempo real.
* Persistencia de favoritos por usuario.
* AutenticaciÃ³n y control de roles.

---

## ğŸ‘¨â€ğŸ’» Autor

Proyecto acadÃ©mico â€“ **Portoviejo 360**
Frontend: **Panel de Disponibilidad y BÃºsqueda Inteligente**

---

### âœ… VEREDICTO FINAL
